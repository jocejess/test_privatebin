name: Tests

on: [push]

jobs:
  build-test:
    runs-on: ubuntu-latest

    steps:
      - name: 📥 Checkout code
        uses: actions/checkout@v3

      - name: 📦 Install dependencies
        uses: php-actions/composer@v6

      - name: PHP Code Sniffer
        uses: php-actions/phpcs@v1
        with:
          php_version: 8.1
          path: ./tst/
          standard: phpcs.xml




#      - name: 🧪 Test
#        uses: php-actions/phpunit@v3
#        env:
#          XDEBUG_MODE: coverage
#        with:
#          version: "9.6.11"
#          bootstrap: tst/Bootstrap.php
#          memory_limit: "512M"
#          configuration: phpunit.xml
#          php_version: "8.2"
#          php_extensions: gd xdebug
#            
#      - name: 📝 Generate code coverage report
#        uses: irongut/CodeCoverageSummary@v1.3.0
#        with:
#          filename: log/coverage-cobertura.xml
#          badge: true
#          fail_below_min: false
#          format: markdown
#          hide_branch_rate: false
#          hide_complexity: true
#          indicators: true
#          output: both
#          thresholds: '60 80'

#      - name: 📮 Send coverage report to GitHub action summary
#        run: cat code-coverage-results.md >> $GITHUB_STEP_SUMMARY
